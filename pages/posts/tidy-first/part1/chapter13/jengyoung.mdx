# 하나의 더미

## 요약

- 필요한 만큼의 코드를 하나의 더미처럼 느껴질 때까지 흩어진 코드를 모아요.
- 작은 코드 조각을 지향하지만, 코드 조각들끼리 교류하는 방식이 어렵게 느껴진다면 명확하게 이해할 수 있도록 묶어서 정리해요.

```ts filename="하나의_더미_에시.tsx"
/**
 * [ 컨텍스트 설명 ]
 *
 * A씨는 현재 클라이언트 관련한 정보들을 별도로 상수화하여 관리하고 있어요.
 * 하지만 이러한 변수명들을 불러올 때, 다음과 같은 고민이 들었어요.
 *
 * - `URL`이라는 변수명은 너무 반복돼요. 무엇인지 확인하려면 한 번 더 들어가야 했어요.
 * - 관련된 코드가 여러 개 있다는 것을 인지시키고 싶었어요. 실제로 현재 도메인 이름이 대상 도메인이 맞는지 체크하는 함수가 존재했는데, 이를 인지하는 사람이 적었어요.
 * - 각각을 가져왔을 때의 이점이 있나 싶었어요. 성능상 크게 차이나지 않을뿐더러, 어차피 각 값과 함수가 한 번씩은 CSR 구조 내에서 한 번씩은 반드시 사용돼요.
 */

class Host {
  static BASE_URL = "https://www.foo.com";

  static checkValidURL(url: string) {
    // ...
  }
}
```

## 사유

저는 **우아한 퇴보**라는 말을 좋아해요. 개발에는 항상 이상적인 기술들이 존재하는데, 일부 사이드 이펙트가 발생하는 브라우저에 대한 배려가 느껴지니까요.

어쩌면 이 파트가 개발자의 우아한 퇴보가 아닐까 싶어요.

일반적으로 성능을 추구하는 업계 특성상, **항상 모든 것은 쪼개야 한다**는 강박관념이 존재해요.

그러다 보니 일단 쪼개고 보는데, 그러다 보니 다음과 같은 문제점이 있었어요.

1. 분명히 어딘가에는 상수나 함수가 있는데 못 찾겠어요. 그런데 MR에 보면 있다는데, 이때 자괴감이 들어요 🤣
2. 점차 변수에 대한 겹침이 심해졌어요. 예컨대 특정 도메인 별로 반복되는 상수 개념을 export한다던가 할 때 말이죠.

결국 이러한 것들이 쌓이다보니, 결국 잘못된 것들을 불러오거나, 반복되는 상수들을 만들게 됐어요.  
오히려 번들사이즈를 줄이고자 재사용성 높게 분리했는데, 번들링 과정에서 실질적인 메모리 상에서의 용량은 커지게되는 셈이죠.

따라서, 요새는 보통 객체로 묶어서 쓰는 편이에요.

페이지가 정적인 곳에서의 성능만 신경을 쓰고, 동적인 소스인 경우에서는 하나의 더미로 묶어서 표현하는 방법으로 말이죠.  
이렇게 사용하고 나니, 확실히 변수의 반복되는 부분이 줄어들고, 오히려 읽기가 편하더라구요.

### 논의해보고 싶은 부분 - 어떻게 묶는 것이 좋을까요?

이전부터 궁금하기는 했는데, 다음과 같이 묶는 방법들이 고려돼요.

상수의 경우에는 타입스크립트에서는 거의 밥 먹듯이 나오는 개념이기도 하죠!

- `enum`
- `const enum`
- `as const`

상수 + 함수의 경우에는 다음과 같은 부분들이 존재하겠네요.

- 저는 그냥 모듈별로 분리하겠어요!
- 그냥 객체로 묶을래요!
- 생성자 함수로 선언하여 묶을래요!
- 클래스로 묶을래요!

마이너(?)한 케이스에서는 이런 논의도 가능하겠네요.

- 별도의 선언이 귀찮아요! 자주 쓰는 라이브러리의 코드를 몽키패칭해서 사용하는 것도 괜찮을 것 같아요!
- 그냥 글로벌하게 자주 쓰는 상수들은 한 번에 묶어버리죠~ (ex: 에러 코드, 스토리지 키, 네비게이션 메타 필드, ...)

> 답은 없다고 생각합니다! 결국 팀 내의 공통된 인지 흐름에서 가장 손맛이 있는 코드가 좋은 코드라 생각해요.
> 단지, 최근 여러분의 개발 근황 겸(?) 한 번 논의해보죠~
